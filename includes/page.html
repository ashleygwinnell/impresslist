<!DOCTYPE html>
<html lang="en-gb">
	<head>
		<?php require_once("head.html"); ?>

      	<script type='text/javascript'>

        	$().ready(function() {

	        	impresslist.config.system.email = "<?php echo $impresslist_emailAddress; ?>";
	        	impresslist.config.system.backups.lastmanual = <?php echo $settings['manual_backup_lastbackedupon']; ?>;
	        	impresslist.config.system.twitter = <?php echo $settings['twitter_configuration']; ?>;
	        	impresslist.config.user.id = <?php echo $user_id; ?>;
        		impresslist.config.user.game = <?php echo $user_currentGame; ?>;
        		impresslist.config.user.audience = <?php echo $user_currentAudience; ?>;
      			impresslist.config.user.gmail = <?php echo $user_gmailIndex; ?>;
      			impresslist.config.user.admin = <?php echo (($user_admin)?"true":"false"); ?>;
      			impresslist.config.user.imapServer = "<?php echo $user_imapServer; ?>";
      			impresslist.config.user.smtpServer = "<?php echo $user_smtpServer; ?>";
      			impresslist.config.misc.countries = {};

      			<?php
      				$countries = listcountries();
      				foreach($countries as $name => $code) {
      					echo "impresslist.config.misc.countries[\"" . $code . "\"] = \"" . $name. "\";\n";
      				}
      			?>

      			<?php
      				$tags = listtags();
      				foreach($tags as $name => $data) {
      					echo "impresslist.config.tags[\"" . $name . "\"] = { name: \"" . $data['name'] . "\", color: \"" . $data['color'] . "\" };\n";
      				}
      			?>

      			<?php for($i = 0; $i < $num_users; $i++): ?>
	        		impresslist.addUser(new User(<?php echo json_encode($users[$i]); ?>), true);
        		<?php endfor; ?>

        		<?php for($i = 0; $i < $num_games; $i++): ?>
	        		impresslist.addGame(new Game(<?php echo json_encode($games[$i]); ?>), true);
        		<?php endfor; ?>

        		<?php for($i = 0; $i < $num_audiences; $i++): ?>
	        		impresslist.addAudience(new Audience(<?php echo json_encode($audiences[$i]); ?>), true);
        		<?php endfor; ?>

        		// Tag search data/config/objs.
        		impresslist.config.misc.tagSearch = new Bloodhound({
					datumTokenizer: Bloodhound.tokenizers.obj.whitespace("name"),
					queryTokenizer: Bloodhound.tokenizers.whitespace,
					local: $.map(impresslist.config.tags, function (obj, k) {
						return { key: k, name: obj.name, color: obj.color };
					})
				});
				impresslist.config.misc.tagSearch.initialize();
				impresslist.config.misc.tagSearchConfig = {
					typeaheadjs: { name: "bh", displayKey: "name", valueKey: "name", source: impresslist.config.misc.tagSearch.ttAdapter() },
					tagClass: function(item) {
						return "tag-" + impresslist.util.findTagKey(item)
					},
					freeInput:false
				};

        		impresslist.init();

        	});
        </script>

	</head>
	<body>
		<?php require_once("nav.html"); ?>

		<!-- Spacer -->
		<div class='container mycontainer' style='margin-top:50px;'>
			&nbsp;
		</div>



		<!-- Home page -->
		<div id='home-page' data-type-page='true' data-page='home'>



			<div id='current-project' class='container mycontainer'>
				<div class='filters'>
					<div class='filter-item'><b>Filters:</b></div>
					<div style='display:none;'>
						<input id='filter-recent-contact' type='checkbox'/>
						<input id='filter-high-priority' type='checkbox'/>
						<input id='filter-personal-contact' type='checkbox'/>
						<input id='filter-email-attached' type='checkbox'/>
						<input id='filter-assigned-self' type='checkbox'/>
						<input id='filter-show-outofdate' type='checkbox'/>
					</div>
					<select id="filters-select" multiple="multiple">
					    <option data-id='filter-recent-contact' value="filter-recent-contact">Not recently contacted (1 week)</option>
					    <option data-id='filter-high-priority' value="filter-high-priority">High Priority</option>
					    <option data-id='filter-personal-contact' value="filter-personal-contact">People I've contacted</option>
					    <option data-id='filter-email-attached' value="filter-email-attached">People with Email Addresses</option>
					    <option data-id='filter-assigned-self' value="filter-assigned-self">People assigned to me</option>
					    <option data-id='filter-show-outofdate' value="filter-show-outofdate">People who are out-of-date</option>
					</select>
					<script type="text/javascript">
					    $(document).ready(function() {
					        $('#filters-select').multiselect({
					        	includeResetOption: true,
					        	buttonWidth: '200px',
					        	dropRight: true,
					        	templates: {
					        		li: "<li style='font-size:12pt'><a href=\"javascript:void(0);\"><label></label></a></li>"
					        	},
					        	onChange: function(option, checked, select) {
					        		console.log(option, checked, select);
					        		$('#' + option.attr('data-id')).prop("checked", checked);
					        		impresslist.refreshFilter();
					        	}
					        });
					    });
					</script>
				</div>
				<!-- <div class='filters' style='clear:both;'>
					<div class='filter-item'><b>Tags:</b></div>
					<div id='filter-tag-list'>

					</div>
					<script type="text/javascript">
						$(document).ready(function() {
							for(var key in impresslist.config.tags) {
								var n = impresslist.config.tags[key].name;
								var c = impresslist.config.tags[key].color;
								$('#filter-tag-list').append("<span class='label label-default' style='background-color:" + c + "'>" + n + "</span> ");
							}
						});
					</script>

				</div> -->



			</div><br/>

			<div class='container mycontainer'>
				<h3>Audience</h3>
				<ul class="nav nav-pills" role='tablist'>
					<li role="presentation"><a id='jobs-pill-link' href="#jobs-pill" aria-controls="jobs-pill" role="tab" data-toggle="pill" style='display:none;'>Jobs</a></li>
					<li role="presentation" class="active"><a href="#people-pill" aria-controls="people-pill" role="tab" data-toggle="pill">People</a></li>
					<li role="presentation"><a href="#publications-pill" aria-controls="publications-pill" role="tab" data-toggle="pill">Publications</a></li>
					<li role="presentation"><a href="#youtubers-pill" aria-controls="youtubers-pill" role="tab" data-toggle="pill">YouTubers</a></li>
					<li role="presentation"><a href="#twitchchannels-pill" aria-controls="twitchchannels-pill" role="tab" data-toggle="pill">Twitch Channels</a></li>
					<li role="presentation"><a href="#podcasts-pill" aria-controls="podcasts-pill" role="tab" data-toggle="pill">Podcasts</a></li>
					<li role="presentation"><a id='chat-pill-link' href="#chat-pill" aria-controls="chat-pill" role="tab" data-toggle="pill" style='display:none;'>Chat</a></li>
				</ul><br/>

				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="people-pill">

						<!-- People -->
						<div id='people-container'>
							<div class="panel panel-default">
				  				<div class="panel-heading oa">


				  					<span
				  						data-type='person'
				  						title='Select People'
				  						class='nav-select-edit nav-table-topright-item glyphicon glyphicon-edit'
				  						></span>
				  					<span
										data-type='person'
				  						title='Deselect All'
				  						class='nav-deselect-all nav-table-topright-item glyphicon glyphicon-unchecked checkbox-column'></span>
				  					<span
				  						data-type='person'
				  						title='Select All'
				  						class='nav-select-all nav-table-topright-item glyphicon glyphicon-check checkbox-column'
				  						></span>

				  					<span class='fl'>People</span>

				  					<span id='people-count' class='fr'>(0)</span>
				  				</div>
								<table class='table table-striped sortable' >
									<thead>
										<tr>
											<!-- <th data-defaultsort="desc">ID</th> -->
											<th data-defaultsort="asc">Name</th>
											<th>Priority</th>
											<th>Twitter</th>
											<th>Last Contacted</th>
										</tr>
									</thead>
									<tbody id='people'>

									</tbody>
									<tfoot id='people-footer'><tr><td colspan='4'>No results.</td></tr></tfoot>
								</table>
							</div>
						</div>

					</div>
					<div role="tabpanel" class="tab-pane" id="publications-pill">

						<!-- Publications / Sites -->
						<div id='publications-container' >
							<div class="panel panel-default">

								<div class="panel-heading oa">

									<span
				  						data-type='publication'
				  						title='Select Publications'
				  						class='nav-select-edit nav-table-topright-item glyphicon glyphicon-edit'
				  						></span>

				  					<span
										data-type='publication'
				  						title='Deselect All'
				  						class='nav-deselect-all nav-table-topright-item glyphicon glyphicon-unchecked checkbox-column'></span>
				  					<span
				  						data-type='publication'
				  						title='Select All'
				  						class='nav-select-all nav-table-topright-item glyphicon glyphicon-check checkbox-column'
				  						></span>

									<span class='fl'>Publications / Sites</span><span id='publication-count' class='fr'>(0)</span>
								</div>
								<table class='table table-striped sortable' >
									<thead>
										<tr>
											<!-- <th data-defaultsort="asc">ID</th> -->
											<th data-defaultsort="asc">Name</th>
											<th>Priority</th>
											<th>Url</th>
											<th>Twitter</th>
											<th>Last Posted On</th>
										</tr>
									</thead>
									<tbody id='publications'>

									</tbody>
									<tfoot id='publications-footer'><tr><td colspan='4'>No results.</td></tr></tfoot>
								</table>
							</div>
						</div><br/>

					</div>
					<div role="tabpanel" class="tab-pane" id="youtubers-pill">



						<!-- Youtubers -->
						<div id='youtubers-container'>
							<div class="panel panel-default">
				  				<div class="panel-heading oa">

				  					<span
				  						data-type='youtuber'
				  						title='Select YouTubers'
				  						class='nav-select-edit nav-table-topright-item glyphicon glyphicon-edit'
				  						></span>

				  					<span
										data-type='youtuber'
				  						title='Deselect All'
				  						class='nav-deselect-all nav-table-topright-item glyphicon glyphicon-unchecked checkbox-column'></span>
				  					<span
				  						data-type='youtuber'
				  						title='Select All'
				  						class='nav-select-all nav-table-topright-item glyphicon glyphicon-check checkbox-column'
				  						></span>

				  					<span class='fl'>YouTubers</span><span id='youtuber-count' class='fr'>(0)</span>
				  				</div>
								<table class='table table-striped sortable' >
									<thead>
										<tr>
											<!-- <th data-defaultsort="asc">ID</th> -->
											<th data-defaultsort="asc">Channel Name</th>
											<th>Priority</th>
											<th>Subscribers</th>
											<th>Views</th>
											<th>Twitter</th>
											<th>Last Uploaded On</th>
										</tr>
									</thead>
									<tbody id='youtubers'>

									</tbody>
									<tfoot id='youtubers-footer'><tr><td colspan='4'>No results.</td></tr></tfoot>
								</table>
							</div>
						</div><br/>
					</div>

					<div role="tabpanel" class="tab-pane" id="twitchchannels-pill">

						<!-- Twitch Channels  -->
						<div id='twitchchannels-container'>
							<div class="panel panel-default">
				  				<div class="panel-heading oa">

				  					<span
				  						data-type='twitchchannel'
				  						title='Select Twitch Channels'
				  						class='nav-select-edit nav-table-topright-item glyphicon glyphicon-edit'
				  						></span>

				  					<span
										data-type='twitchchannel'
				  						title='Deselect All'
				  						class='nav-deselect-all nav-table-topright-item glyphicon glyphicon-unchecked checkbox-column'></span>
				  					<span
				  						data-type='twitchchannel'
				  						title='Select All'
				  						class='nav-select-all nav-table-topright-item glyphicon glyphicon-check checkbox-column'
				  						></span>

				  					<span class='fl'>Twitch Channels</span><span id='twitchchannel-count' class='fr'>(0)</span>
				  				</div>
								<table class='table table-striped sortable' >
									<thead>
										<tr>
											<!-- <th data-defaultsort="asc">ID</th> -->
											<th data-defaultsort="asc">Channel Name</th>
											<th>Priority</th>
											<th>Subscribers</th>
											<th>Views</th>
											<th>Twitter</th>
											<th>Last Uploaded On</th>
										</tr>
									</thead>
									<tbody id='twitchchannels'>

									</tbody>
									<tfoot id='twitchchannels-footer'><tr><td colspan='4'>No results.</td></tr></tfoot>
								</table>
							</div>
						</div><br/>
					</div>

					<div role="tabpanel" class="tab-pane" id="podcasts-pill">

						<!-- Podcasts  -->
						<div id='podcasts-container'>
							<div class="panel panel-default">
				  				<div class="panel-heading oa">

				  					<span
				  						data-type='podcast'
				  						title='Select Podcasts'
				  						class='nav-select-edit nav-table-topright-item glyphicon glyphicon-edit'
				  						></span>

				  					<span
										data-type='podcast'
				  						title='Deselect All'
				  						class='nav-deselect-all nav-table-topright-item glyphicon glyphicon-unchecked checkbox-column'></span>
				  					<span
				  						data-type='podcast'
				  						title='Select All'
				  						class='nav-select-all nav-table-topright-item glyphicon glyphicon-check checkbox-column'
				  						></span>

				  					<span class='fl'>Podcasts</span><span id='podcast-count' class='fr'>(0)</span>
				  				</div>
								<table class='table table-striped sortable' >
									<thead>
										<tr>
											<!-- <th data-defaultsort="asc">ID</th> -->
											<th data-defaultsort="asc">Name</th>
											<th>Priority</th>
											<!-- <th>Subscribers</th>
											<th>Views</th> -->
											<th>Twitter</th>
											<th>Last Uploaded On</th>
										</tr>
									</thead>
									<tbody id='podcasts'>

									</tbody>
									<tfoot id='podcasts-footer'><tr><td colspan='4'>No results.</td></tr></tfoot>
								</table>
							</div>
						</div><br/>
					</div>

					<div role="tabpanel" id='jobs-pill' class='tab-pane'>
						<div id='jobs-container'>

							<div class='row'>
								<div class='col-sm-12'>
									<div><b>Jobs:</b></div>
									<p></p>
									<textarea id='jobs-textarea' class='messages form-control' style='min-height:100px; overflow:scroll;'>Loading...</textarea>
								</div>
							</div>
							<p></p>

							<div class='row'>
								<div class='col-sm-12'>
									<button id='jobs-save-all' class='btn btn-primary' style='width:100%' disabled>Save</button>
								</div>
							</div>
						</div>
						<br/>

					</div>

					<div role="tabpanel" id='chat-pill' class='tab-pane'>
						<div id='chat-container'>
							<div id='chat'>
								<div class='row'>
									<div class='col-sm-12'>
										<div><b>Online Users:</b> <span class='online-users'></span></div>
										<p></p>
										<div class='messages form-control' style='min-height:100px; overflow:scroll;'>
										</div>
									</div>
								</div>
								<p></p>

								<div class='row'>
									<div class='col-sm-10'>
										<input type='text' class='form-control message'/>
									</div>
									<div class='col-sm-2'>
										<button class='btn btn-primary submit-message' style='width:100%'>Chat</button>
									</div>
								</div>

							</div>
						</div>
						<br/>

					</div>

				</div>
			</div>







		</div>

		<!-- Help panel -->
		<div id='help-page' data-type-page='true' data-page='help'>
			<div class='container mycontainer'>
				<p><b>Help:</b></p>
				<!-- <p>Everybody knows by now that you can't just carpet-bomb the entire games press with a single non-personalised email, especially so if you're not part of the infamous (and totally fictional) indie elite. That is why this tool was created, and why it doesn't include an "email all" feature.</p>



				<p><b>Tips</b></p>-->
				<hr/>
				<p><b>Mailout Tips:</b></p>
				<p><b>For press releases:</b> A surprising number of people use Gmail inbox. Your best effort should be made to get out of the 'promotions' tab. You can do this by:
				<ul>
					<li>Using only one image.</li>
					<li>Asking a question.</li>
					<li>Sending no more than 1 email per week.</li>
				</ul>
				<p><b>For general mailing lists:</b></p>
				<ul>
					<li>Give, give, give, ask -- don't always sell your game, give them something nice. </li>
					<li>Write your emails like you're writing to your best friend. Treat your list like your own fan club.</li>
					<li>See more useful info from <a href='http://howtomarketagame.com/2018/02/02/how-to-build-your-marketing-system/' target='new'>howtomarketyourgame.com</a></li>
				</ul>
				<hr/>

				<p><b>Other tips:</b></p>
				<p>Using this tool is hopefully pretty self-explanatory, so instead we decided it would be better of us to list a bunch of really useful articles that help you hone your story, and make you think a bit more about how you approach your PR and Marketing.</p><p> As below:</p>
				<ul>
					<li><a href='http://indiegames.com/2013/07/five_pr_tips_indies_really_nee.html' target='new'>Five PR tips indies really need</a> - Leigh Alexander, indiegames.com</li>
					<li><a href='http://www.gamasutra.com/view/news/198381/How_to_talk_to_the_video_game_press_in_2013.php' target='new'>How to talk to the video game press in 2013</a> - Mike Rose, gamasutra.com</li>
					<li><a href='http://forceofhab.it/blog/launch-meet-the-games-press/' target='new'>How to talk to games press</a> - Force Of Habit</li>
					<li><a href='http://joostdevblog.blogspot.co.uk/2012/11/the-indie-marketing-plan.html' target='new'>The indie marketing plan</a> - Joost van Dongen</li>
					<li><a href='http://gillen.cream.org/wordpress_html/assorted-essays/how-to-use-and-abuse-the-games-press-and-how-the-games-press-wants-to-use-and-abuse-you/' target='new'>How to use and abuse the gaming press and how the gaming press wants to use and abuse you</a> - Kieron Gillen</li>
					<li>...and of course, <a href='http://www.pixelprospector.com/the-big-list-of-indie-game-marketing/'>The Big List of Indie Game Marketing</a> - Pixel Prospector</li>

					<!--
						Kids review sites lists
						http://www.reviewfordev.com/list-of-review-sites-to-find-the-best-educational-apps-for-kids.php

						tinyBuild big list of Twitch streamers.
						http://tinybuild.com/twitch
					-->



				</ul>
			</div>

		</div>


		<!-- Keys -->
		<div id='keys-page' data-type-page='true' data-page='keys'>
			<div class='container mycontainer'>
				<p><b><span class='current-project-name'>{project name}</span></b></p>
				<p><b>Project Keys</b></p>

				<!-- <div id='keys-loading-true'>
					<div class="alert alert-info" role="alert">
						<span class="glyphicon glyphicon-loading" aria-hidden="true"></span>
						<span class="sr-only"></span>
						Loading...
					</div>
				</div>
				<div id='keys-loading-false'>
				</div> -->


				<p><b>Steam:</b></p>
				<p>Assigned: <span id='steam_keys_assigned_count'>loading...</span></p>
				<p>Available: <span id='steam_keys_available_count'>loading...</span></p>

				<p><b>Nintendo Switch:</b></p>
				<p>Assigned EU: <span id='switch_eu_keys_assigned_count'>loading...</span></p>
				<p>Available EU: <span id='switch_eu_keys_available_count'>loading...</span></p>
				<p>Assigned US: <span id='switch_us_keys_assigned_count'>loading...</span></p>
				<p>Available US: <span id='switch_us_keys_available_count'>loading...</span></p>
				<p>Assigned AU: <span id='switch_au_keys_assigned_count'>loading...</span></p>
				<p>Available AU: <span id='switch_au_keys_available_count'>loading...</span></p>
				<p>Assigned JP: <span id='switch_jp_keys_assigned_count'>loading...</span></p>
				<p>Available JP: <span id='switch_jp_keys_available_count'>loading...</span></p>

				<hr/>
				<p><b>Add Keys</b></p>
				<div class='row'>
					<div class='col-sm-3'>
						<p><b>Platform:</b></p>
					</div>
					<div class='col-sm-9'>
						<select id='keys-add-platform' class='form-control'>
							<option value='---'>---</option>
							<option value='steam'>Steam</option>
							<option value='switch'>Nintendo Switch</option>
							<!-- <option value='gamejolt'>Game Jolt</option> -->
							<!-- <option value='ios'>iOS App Store</option> -->
							<!-- <option value='windows'>Windows Store</option> -->
							<!-- <option value='mac'>Mac App Store</option> -->
							<!-- <option value='xboxone'>Xbox One</option> -->
							<!-- <option value='ps4'>PS4</option> -->
							<!-- <option value='wiiu'>Wii U</option> -->
						</select>
					</div>
				</div>
				<div class='row' style='margin-top:7px;'>
					<div class='col-sm-3'>
						<p><b>Subplatform / Region:</b></p>
					</div>
					<div class='col-sm-9'>
						<select id='keys-add-subplatform' class='form-control'>
							<option value='---'>---</option>
							<?php
								$regions = util_listNintendoRegions();
								foreach($regions as $code => $name) {
									echo "<option value='{$code}'>{$name}</option>\n";
								}
							?>

						</select>
					</div>
				</div>
				<div class='row'>
					<div class='col-sm-3'>
						<p><b>Keys:</b></p>
					</div>
					<div class='col-sm-9'>
						<textarea id='keys-add-textfield' class='form-control' style='margin-top:10px;min-height:100px; overflow:scroll;' placeholder="Enter one key per line..."></textarea>
					</div>
				</div>
				<div class='row'>
					<div class='col-sm-3'>
						<p><b>Expiry:</b></p>
					</div>
					<div class='col-sm-9' style='margin-top:7px;'>
						<p>
							<label class='radio-inline'><input id='keys-radio-expiry-never' type='radio' name='keys-expiry-radio' value='never' checked/>Never</label>
							<label class='radio-inline'><input id='keys-radio-expiry-time' type='radio' name='keys-expiry-radio' value='time'/>Time</label>
						</p>


						<div class='input-group date' id='keys-timepicker'>
							<input id='keys-edit-timestamp' type='text' class='form-control' />
							<span class='input-group-addon'>
								<span class='glyphicon glyphicon-calendar'></span>
							</span>
						</div>

					</div>
					<button id='keys-add-submit' class='btn btn-primary fr'>Add Keys</button>
				</div>
				<hr/>



				<div id='keys-remove-form' style='display:none;' >
					<p><b>Remove Keys:</b></p>
					<div class='row'>
						<div class='col-sm-2'>
							<p><b>Platform:</b></p>
						</div>
						<div class='col-sm-10'>
							<select id='keys-remove-platform' class='form-control' style='margin-bottom:10px;'>
								<option value='---'>---</option>
								<option value='steam'>Steam</option>
								<option value='switch'>Nintendo Switch</option>
								<!-- <option value='gamejolt'>Game Jolt</option> -->
								<!-- <option value='ios'>iOS App Store</option> -->
								<!-- <option value='windows'>Windows Store</option> -->
								<!-- <option value='mac'>Mac App Store</option> -->
								<!-- <option value='xboxone'>Xbox One</option> -->
								<!-- <option value='ps4'>PS4</option> -->
								<!-- <option value='wiiu'>Wii U</option> -->
							</select>
						</div>
					</div>
					<div class='row' style='margin-top:7px;'>
						<div class='col-sm-2'>
							<p><b>Subplatform / Region:</b></p>
						</div>
						<div class='col-sm-10'>
							<select id='keys-remove-subplatform' class='form-control'>
								<option value='---'>---</option>
								<?php
									$regions = util_listNintendoRegions();
									foreach($regions as $code => $name) {
										echo "<option value='{$code}'>{$name}</option>\n";
									}
								?>

							</select>
						</div>
					</div>
					<div class='row'>
						<div class='col-sm-2'>
							<p><b>Amount:</b></p>
						</div>
						<div class='col-sm-8'>
							<input id='keys-remove-amount' class='form-control'  />
						</div>
						<button id='keys-remove-submit' class='btn btn-primary fr'>Remove Keys</button>
					</div>
					<br/>


					<div id='keys-removed-container' style='display:none;' >
						<p><b>Removed Keys:</b></p>
						<p>Copy these to somewhere safe as they are no longer stored within impress[].</p>
						<ul id='keys-removed-list'></ul>
					</div>
				</div>
				<br/><br/>

			</div>
		</div>

		<!-- Coverage -->
		<div id='coverage-page' data-type-page='true' data-page='coverage'>
			<div class='container mycontainer'>
				<div class='filters' style='float:left;text-align:left;'>
					<p><b><span class='current-project-name'>{project name}</span></b></p>
					<div class='filter-item'><b>Project Coverage</b></div>
				</div>
			</div><br/>

			<div class='container mycontainer'>
				<div id='coverage-loading-true'>
					<div class="alert alert-info" role="alert">
						<span class="glyphicon glyphicon-loading" aria-hidden="true"></span>
						<span class="sr-only"></span>
						Loading...
					</div>
				</div>
				<div id='coverage-loading-false'>
					<div id='coverage'>

					</div>
					<div id='coverage-footer'>
						<div class="alert alert-info" role="alert">
							<span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>
							<span class="sr-only">Error:</span>
							Dang! There is currently no coverage for your project.
						</div>
						<!--
							<div class='row'>
								<div class='col-sm-3 fr'>
									<button class='btn btn-primary add-coverage' style='width:100%'>Add Coverage</button>
								</div>
							</div>
						-->
					</div>
				</div>


			</div>
			<br/><br/>

		</div>

		<!-- Watched Games -->
		<div id='watchedgames-page' data-type-page='true' data-page='watchedgames'>
			<div class='container mycontainer'>
				<div class='filters' style='float:left;text-align:left;'>
					<p><b><span class='current-project-name'>{project name}</span></b></p>
					<div class='filter-item'><b>Watched Games (Coverage)</b></div>
				</div>
			</div><br/>

			<div class='container mycontainer'>
				<div id='watchedgames-loading-true'>
					<div class="alert alert-info" role="alert">
						<span class="glyphicon glyphicon-loading" aria-hidden="true"></span>
						<span class="sr-only"></span>
						Loading...
					</div>
				</div>
				<div id='watchedgames-loading-false'>
					<div id='watchedgames'>

					</div>
					<div id='watchedgames-footer'>
						<div class="alert alert-info" role="alert">
							<span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>
							<span class="sr-only">Error:</span>
							Dang! There is currently no coverage for your project's Watched Games.
						</div>
						<!--
							<div class='row'>
								<div class='col-sm-3 fr'>
									<button class='btn btn-primary add-coverage' style='width:100%'>Add Coverage</button>
								</div>
							</div>
						-->
					</div>
				</div>


			</div>
			<br/><br/>

		</div>

		<!-- Social -->
		<div id='social-page' data-type-page='true' data-page='social'>
			<div class='container mycontainer'>

				<? if (
						$twitter_consumerKey == 'consumer_key' ||
						$twitter_consumerSecret == "consumer_secret" ||
						$twitter_oauthToken == "oauth_token" ||
						$twitter_oauthSecret == "oauth_secret"
					): ?>
					<div class="alert alert-danger" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span class="sr-only">Error:</span>
						Twitter API is not correctly configured.
					</div>
				<? endif; ?>

				<? if (
						$facebook_appId == 'app_id' ||
						$facebook_appSecret == "app_secret" ||
						$facebook_apiVersion == "api_version"
					): ?>
					<div class="alert alert-danger" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span class="sr-only">Error:</span>
						Facebook API is not correctly configured.
					</div>
				<? endif; ?>

				<div id='social-homepage' class='row'>
					<div class='col-sm-9'>
						<p><b>Social</b></p>

						<ul class="nav nav-pills" role='tablist'>
							<li role="presentation" class="active"><a href="#accounts-pill" aria-controls="accounts-pill" role="tab" data-toggle="pill">Accounts</a></li>
							<li role="presentation" ><a href="#timeline-pill" aria-controls="timeline-pill" role="tab" data-toggle="pill">Timeline</a></li>
							<li role="presentation"><a href="#uploads-pill" aria-controls="uploads-pill" role="tab" data-toggle="pill">Uploads</a></li>

						</ul>


					</div>

				</div>
				<hr/>
				<div class="tab-content">
					<div role="tabpanel" id='timeline-pill' class='tab-pane'>
						<div class='row'>
							<div class='col-sm-3'>
								<p><b>Timeline</b></p>
								<p>Schedule tweets &amp; retweets, Facebook posts/shares.</p>
								<button id='social-timeline-add' class='btn btn-primary'>Add</button>
							</div>
							<div class='col-sm-9'>

								<div id='social-timeline-loading'><p><b>Loading...</b></p></div>
								<div id='social-timeline-none' style='display:none;'>No scheduled posts.</div>
								<div id='social-timeline'></div>

							</div>
						</div>

					</div>

					<div role="tabpanel" id='uploads-pill' class='tab-pane'>
						<div class='row'>
							<div class='col-sm-12'>
								<p><b>Upload</b></p>
								<form id="social-uploadimage" action="" method="post" enctype="multipart/form-data">
									<div id="selectImage">
										<input id='input-id' type="file" name="file" id="file" class='file' data-show-preview="false" required />
									</div>
								</form>
								<script type='text/javascript'>
									$(document).ready(function (e) {
										$("#input-id").fileinput();

										$("#social-uploadimage").on('submit',(function(e) {
											e.preventDefault();
											console.log("submitted");
											//$("#message").empty();
											//$('#loading').show();
											API.addSocialUpload(new FormData(this), function() {
												$('#social-uploadimage').trigger("reset");
											});
										}));
									});
								</script>
							</div>
						</div><br/>

						<div class='row'>
							<div class='col-sm-12'>
								<p><b>Uploads</b></p>
								<p id='socialUploads-list-loading'>Loading...</p>
								<p id='social-uploads-list-none' style='display:none;' >No uploads.</p>
								<div id='social-uploads-list'></div>
							</div>
						</div>
					</div>

					<div role="tabpanel" id='accounts-pill' class='tab-pane active'>
						<div class='row'>

							<div class='col-sm-12'>
								<p><b>Twitter Accounts</b></p>
								<div id='social-homepage-twitteracc-list'>
								</div>
								<div id='social-homepage-twitteracc-list-none' style='display:none;'>
									<p>No linked accounts.</p>
								</div>
								<div id='social-homepage-twitteracc-list-loading'>
									<p>Loading...</p>
								</div>

								<br/><p><b>Facebook Accounts/Pages</b></p>
								<div id='social-homepage-facebookacc-list'>
								</div>
								<div id='social-homepage-facebookacc-list-none' style='display:none;'>
									<p>No linked accounts.</p>
								</div>
								<div id='social-homepage-facebookacc-list-loading'>
									<p>Loading...</p>
								</div>

								<!-- <p><img src='images/email-twitter.png' /> @ashleygwinnell</p> -->
								<!-- <p><img src='images/email-facebook.png' /> Force Of Habit (page)</p>-->
							</div>
						</div>
						<hr/>
						<div class='row'>
							<div class='col-sm-3'>
								<p><b>Add</b></p>
								<?php
									$connection = new Abraham\TwitterOAuth\TwitterOAuth($twitter_consumerKey, $twitter_consumerSecret);
									$arr = $connection->oauth('oauth/request_token', array('oauth_callback' => 'oob'));

									$authoriseurl = $connection->url('oauth/authorize', array('oauth_token' => $arr['oauth_token']) );
								?>
								<div id='social-addtwitteraccount-buttonpage'>
									<a id='social-addtwitteraccount-link' href="<?php echo $authoriseurl; ?>" target='new'><button class='btn btn-primary'>Twitter Account</button></a>
								</div>
								<div id='social-addfacebookaccount-buttonpage' style='margin-top:10px'>
									<a id='social-addfacebookaccount-link' href="api.php?endpoint=/social/account/facebook/add/" target='new'><button class='btn btn-primary'>Facebook Account</button></a>
								</div>
								<div id='social-addfacebookpage-buttonpage' style='margin-top:10px'>
									<button id='social-addfacebookpage' data-toggle='modal' data-target='.addfacebookpage_modal' class='btn btn-primary'>Facebook Page</button>
								</div>
								<div id='social-addtwitteraccount-verifypage' style='display:none;'>
									<p><b>Twitter Account</b></p>
									<p>
										<input id='social-addtwitteraccount-requesttoken' type='text' class='form-control' style='display:none;' value='<?php echo $arr["oauth_token"]; ?>'/>
										<input id='social-addtwitteraccount-requesttokensecret' type='text' class='form-control' style='display:none;' value='<?php echo $arr["oauth_token_secret"]; ?>'/>

										<input id='social-addtwitteraccount-pin' type='text' class='form-control' placeholder='Enter PIN...'/></p>
									<p><button id='social-addtwitteraccount-submit' class='btn btn-primary'>Add</button> <button id='social-addtwitteraccount-cancel' class='btn btn-danger'>Cancel</button></p>
								</div>

							</div>
							<div class='col-sm-3'>
								<p><b>Tasks</b></p>
								<div id='social-refresh-social-icons'>
									<a onclick='impresslist.util.iframe("/includes/tasks/refresh-social-icons.php");' target='new'><button class='btn btn-primary'>Refresh Icons</button></a>
								</div>


							</div>


						</div>
					</div>
				</div>
				<br/>
				<br/>
			</div>
		</div>

		<!-- Mailout -->
		<div id='mailout-page' data-type-page='true' data-page='mailout'>
			<div class='container mycontainer'>
				<? if (
						$user['emailSMTPServer'] == '' ||
						$user['emailIMAPServer'] == '' ||
						$user['emailIMAPPassword'] == ''
					): ?>
					<div class="alert alert-danger" role="alert">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
						<span class="sr-only">Error:</span>
						IMAP is not correctly configured and so mailout features will not work for you. <a href='javascript:;' class='nav-user-changeimapsettings'>Set it up!</a>
					</div>
				<? endif; ?>

				<div id='mailout-homepage' class='row'>
					<div class='col-sm-3'>
						<p><b>Simple Mailouts</b></p>
						<p>Send an email out to multiple contacts.</p>
						<button id='nav-add-simplemailout' class='btn btn-primary'>Add</button>

						<br/><br/>

						<button id='nav-mailout-tips' class='btn btn-info' data-nav-page="help" href='javascript:;'>Tips</button>
					</div>
					<div class='col-sm-9'>
						<div class='panel panel-default'>
							<div class="panel-heading oa">
				  				<span class="fl"><b>Mailouts:</b></span>
							</div>
							<table class='table table-striped sortable'>
								<thead>
									<tr>
										<th>Name</th>
										<th># Recipients</th>
										<th>Open %</th>
										<th>Status</th>
									</tr>
								</thead>
								<tbody id='mailout-list-tbody'>

								</tbody>
								<tfoot id='mailout-list-footer'><tr><td colspan='4'>No mailouts.</td></tr></tfoot>
							</table>
						</div>
					</div>
				</div>
				<div id='mailout-writepage' class='row'>
					<div class='col-sm-3'>
						<p><b>Simple Mailout</b></p>
						<p>Tags available for mail merge features.</p>

						<p><b>{{first_name}}</b><br/>Use contact's first name.</p><br/>

						<p><b>{{steam_key}}</b><br/>Gives a new Steam key.</p>
						<p><b>{{steam_keys}}</b><br/>List all Steam keys sent to this contact. Assigns a new one if never sent any.</p>
						<p><b>{{steam_key:project-name}}</b><br/>Same as above but for a specific project.</p>
						<p><b>{{steam_keys:project-name}}</b><br/>Same as above but for a specific project.</p>

						<p><b>{{switch_key}}</b><br/>Gives a new Nintendo Switch key.</p>
						<p><b>{{switch_keys}}</b><br/>List all Switch keys sent to this contact. Assigns a new one if never sent any.</p>


					</div>
					<div class='col-sm-9'>
						<p><b>Name:</b></p>
						<input id='mailout-name' class='form-control' name='mailout-name' placeholder='' /><br/>

						<p><b>Subject line:</b></p>
						<input id='mailout-subject' class='form-control' name='mailout-subject' placeholder='' /><br/>

						<p><b>Basic Content:</b></p>
						<ul class="nav nav-tabs">
							<li class="active"><a data-toggle="tab" href="#mailout-write">Write</a></li>
							<li><a id='mailout-preview-tab' data-toggle="tab" href="#mailout-preview">Preview</a></li>
						</ul>

						<div class="tab-content">
							<div id="mailout-write" class="tab-pane fade in active">
								<textarea id='mailout-content' class='messages form-control' style='margin-top:10px;margin-bottom:10px;min-height:100px; overflow:scroll;' placeholder="Use Markdown..."></textarea>
							</div>
							<div id="mailout-preview" class="tab-pane fade" style=''>

							</div>
						</div>

						<p><b>Time:</b></p>
						<p>
							<input id='mailout-radio-time-asap' type='radio' name='mailout-time-radio' value='now' checked/> ASAP&nbsp;
							<input id='mailout-radio-time-scheduled' type='radio' name='mailout-time-radio' value='later'/> Scheduled Time
						</p>
						<div class='input-group date' id='mailout-timepicker'>
							<input id='mailout-edit-timestamp' type='text' class='form-control' />
							<span class='input-group-addon'>
								<span class='glyphicon glyphicon-calendar'></span>
							</span>
						</div><br/>



						<div id='mailout-recipients' class='panel panel-default'>
							<div class="panel-heading oa">
				  				<span class="fl"><b>Recipients:</b></span>
							</div>
							<table class='table table-striped sortable'>
								<thead>
									<tr>
										<th>Name</th>
										<th>Publication/Channel</th>
										<th class='mailout-readflags'>Opened</th>
										<th class='mailout-readflags'>Remind?</th>
									</tr>
								</thead>
								<tbody id='mailout-recipients-tbody'>

								</tbody>
							</table>
						</div>
						<div id='mailout-recipients-none'><p><button id='nav-mailout-addrecipients' class='btn btn-primary' data-nav-page='home'>Add Recipients</button></p></div>


						<div>
							<button id='mailout-writepage-save' class='btn btn-primary'>Save</button>
							<button id='mailout-writepage-duplicate' class='btn btn-info'>Duplicate</button>
							<button id='mailout-writepage-back' class='btn btn-default'>Close</button>
							<!-- <button class='btn btn-info fr'>Send Test Email</button> -->
							<div class='fr'>
								<button id='mailout-writepage-send' class='btn btn-success'>Send</button>
								<button id='mailout-writepage-cancelsend' class='btn btn-warning'>Cancel Send</button>
								<button id='mailout-writepage-remove' class='btn btn-danger'>Remove</button>
							</div>
						</div><br/>
					</div>
				</div>



			</div>
			<br/>
			<br/>
			<br/>
		</div>

		<!-- Import tool -->
		<div id='importtool-page' data-type-page='true' data-page='importtool'>
			<div class='container mycontainer'>
				<p><b>Import</b></p>
				<div id='importtool-type-container'>
					<!-- <input type='radio' name='importtype' value='imp'/> SQL (impress[] export) &nbsp; -->
					<input id='importtool-type-csv' type='radio' name='importtool-type' value='csv'/> CSV (Comma separated values) &nbsp;
					<input id='importtool-type-tsv' type='radio' name='importtool-type' value='tsv'/> TSV (Tab separated values)
				</div>
				<textarea id='importtool-maintext' class='messages form-control' style='margin-top:10px;margin-bottom:10px;min-height:100px; overflow:scroll;' placeholder="Paste contents here..."></textarea>
				<p><b><i>Please specify input format:</i></b></p>

				<select id='importtool-fieldselect' class='form-control' style='margin-bottom:10px;'>
					<option value='---'>---</option>
					<option value='person_firstname'>Person - First Name</option>
					<option value='person_surname'>Person - Surname</option>
					<option value='person_email'>Person - Email</option>
					<option value='person_twitter'>Person - Twitter</option>
					<option value='person_notes'>Person - Notes</option>
					<option value='person_unknown'>Person - Unlisted field (discard)</option>
					<option value='publication_name'>Publication - Name</option>
					<option value='publication_website'>Publication - Website</option>
					<option value='publication_rssfeed'>Publication - RSS URL</option>
					<option value='publication_twitter'>Publication - Twitter</option>
					<option value='publication_notes'>Publication - Notes</option>
					<option value='publication_unknown'>Publication - Unlisted field (discard)</option>
					<option value='twitchchannel_name'>Twitch Channel - Name</option>
					<option value='twitchchannel_url'>Twitch Channel - URL</option>
					<option value='twitchchannel_twitter'>Twitch Channel - Twitter</option>
					<option value='twitchchannel_email'>Twitch Channel - Email</option>
					<option value='twitchchannel_notes'>Twitch Channel - Notes</option>
					<option value='twitchchannel_unknown'>Twitch Channel - Unlisted field (discard)</option>
				</select>

				<div id='importtool-order' style='margin-bottom:10px;'>

				</div>

				<!-- <select id='importtool-selectorder' multiple type="text" class='form-control' data-role="tagsinput">
				</select> -->

				<button id='importtool-submit' class='btn btn-primary'>Import</button>


			</div>
		</div>

		<!-- Admin panel -->
		<div id='admin-page' data-type-page='true' data-page='admin'>
			<div id='current-project' class='container mycontainer'>
				<div class='filters' style='float:left;text-align:left;'>
					<div class='filter-item'><b>Admin Panel</b></div>
				</div>
			</div><br/>

			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">Users:</div>
					<div class='padx pady oa'>
						<div id='admin-users-list'>

						</div>
						<button id='nav-add-user' class='fr btn btn-success'>Add User</button>

					</div>

					<div id='admin-edit-user-password-form' class='padx pady oa' style='display:none;'>
						<p><b>Edit User Password:</b><p>
						<div class='form-group'>
							<label>New Password:</label>
							<input id='edit-user-password' type='password' class='form-control' />
						</div>
						<div class='form-group'>
							<label>Confirm New Password:</label>
							<input id='edit-user-password-confirm' type='password' class='form-control' />
						</div>
						<button id='nav-save-user-password' class='btn btn-success'>Save</button>
						<button id='nav-close-user-password' class='btn btn-default'>Close</button>
					</div>

					<div id='admin-edit-user-form' class='padx pady oa' style='display:none;'>
						<p><b>Edit User</b></p>
						<div class='form-group'>
							<label>Forename:</label>
							<input id='edit-user-forename' type='text' class='form-control' />
						</div>
						<div class='form-group'>
							<label>Surname:</label>
							<input id='edit-user-surname' type='text' class='form-control' />
						</div>
						<div class='form-group'>
							<label>Email:</label>
							<input id='edit-user-email' type='text' class='form-control' />
						</div>
						<div class='form-group'>
							<label>Color:</label>
							<input id='edit-user-color' type='text' class='form-control' />
						</div>
						<div class='form-group'>
							<label>Admin:</label>
							<input id='edit-user-admin' type='checkbox' />
						</div>

						<button id='nav-save-user' class='btn btn-success'>Save</button>
						<button id='nav-close-user' class='btn btn-default'>Close</button>
						<button id='nav-delete-user' class='btn btn-danger'>Remove</button>
					</div>


				</div>
			</div>

			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">Projects:</div>
					<div class='padx pady oa'>
						<div id='admin-projects-list'>

						</div>
						<hr/>
						<p><b>Add Project</b></p>
						<input id='nav-add-project-name' type='text' class='fl form-control' placeholder='Name' style='width:40%;margin-right:10px'/>
						<input id='nav-add-project-iconurl' type='text' class='fl form-control' placeholder='Icon URL' style='width:40%'/>
						<button id='nav-add-project' class='fr btn btn-success'>Add Project</button>

					</div>

				</div>
			</div>
			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">Audiences:</div>
					<div class='padx pady oa'>
						<div id='admin-audiences-list'>

						</div>
						<hr/>
						<p><b>Add Audience</b></p>
						<input id='nav-add-audience-name' type='text' class='fl form-control' placeholder='Name' style='width:100%;'/>
						<button id='nav-add-audience' class='fr btn btn-success'>Add Audience</button>

					</div>

				</div>
			</div>

			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">Manual Tasks:</div>
					<div class='pady padx'>
						<p>These should all be set up as Cron jobs.</p>
						<a href='includes/tasks/refresh-email.php' target='new'><button class='btn btn-primary'>Refresh Emails</button></a>
						<a href='includes/tasks/refresh-rss.php' target='new'><button class='btn btn-primary'>Refresh RSS Feeds</button></a>
						<a href='includes/tasks/refresh-twitter.php' target='new'><button class='btn btn-primary'>Refresh Twitter Data</button></a>

						<a href='includes/tasks/refresh-youtubers.php' target='new'><button class='btn btn-primary'>Refresh Youtube Data</button></a>

						<a href='includes/tasks/refresh-coverage.php' target='new'><button class='btn btn-primary'>Refresh Coverage</button></a>
						<a href='includes/tasks/refresh-coverage-youtube.php' target='new'><button class='btn btn-primary'>Refresh Coverage (Youtube)</button></a>
						<a href='includes/tasks/refresh-email-latests.php' target='new'><button class='btn btn-primary'>Refresh Email (Latests)</button></a>

						<a href='includes/tasks/refresh-email-queue.php' target='new'><button class='btn btn-primary'>Refresh Email Queue</button></a>

						<a href='includes/tasks/refresh-favicons.php' target='new'><button class='btn btn-primary'>Refresh Favicons</button></a>

						<a href='includes/tasks/refresh-socialqueue.php' target='new'><button class='btn btn-primary'>Refresh Social Queue</button></a>

						<a href='includes/tasks/refresh-twitter-configuration.php' target='new'><button class='btn btn-primary'>Refresh Twitter Configuration</button></a>




					</div>
				</div>
			</div>

			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">Backup Settings:</div>
					<div class='pady padx'>
						<!-- <div class='form-group'>
							<label>Email Backups:</label><input type='checkbox' class='form-control'/>
						</div> -->
						<!-- impresslist.config.system.backups.lastmanual -->
						<p><i>TODO: Automatic email backups.</i></p>
						<p><b>Last Backup On: </b><span data-last-backup='true'></p>
						<p><a href='/api.php?endpoint=/backup/'><button id='save-backup-submit' type='submit' class='btn btn-primary'>Save Backup Now!</button></a></p>
						<p><a href='/api.php?endpoint=/backup-sql/'><button id='save-backup-submit' type='submit' class='btn btn-primary'>Save Backup (SQL) Now!</button></a></p>
						<p><a href='includes/tasks/backup-email.php' target='new'><button class='btn btn-primary'>Email Backup Now!</button></a></p>

					</div>
				</div>
			</div>

			<div class='container mycontainer'>
				<div class="panel panel-default">
					<div class="panel-heading">SQL Query:</div>
					<div class='pady padx'>
						<form role='form' onsubmit='return false;'>
							<div class='form-group'>
								<p>You must use double-quotes.</p>
								<textarea id='sql-query-text' class='form-control' style='min-height:75px;'></textarea>
							</div>
						</form>
						<button id='sql-query-submit' type='submit' class='btn btn-danger'>Live Dangerously</button>
					</div>
				</div>
			</div>

		</div>

		<div id='modals'></div>

		<?php require_once("footer.html"); ?>
	</body>
</html>
